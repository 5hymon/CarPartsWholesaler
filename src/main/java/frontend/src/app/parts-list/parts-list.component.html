<!-- src/app/parts-list/parts-list.component.html -->
<div class="container">
  <h1 class="mb-4 text-center">Hurtownia części – lista części</h1>

  <!-- Ładowanie / błąd -->
  <div *ngIf="loading" class="text-center">
    <p>Ładowanie danych…</p>
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger text-center">
    {{ errorMessage }}
  </div>

  <!-- Dropdown: kategorie i nazwy części -->
  <ul class="menu">
    <li *ngFor="let group of groupByCategory()" class="nav-item dropdown">
      <!-- Kliknięcie w kategorię filtruje po samej kategorii -->
      <a href="javascript:void(0)"
         class="dropdown-toggle"
         (click)="selectByCategory(group.category)">
        {{ group.category }}
      </a>
      <!-- Menu z częściami w danej kategorii (po hoverze) -->
      <ul class="dropdown-menu">
        <li *ngFor="let part of group.parts">
          <a class="dropdown-item"
             href="javascript:void(0)"
             (click)="selectCategoryPart(group.category, part.partName)">
            {{ part.partName }}
          </a>
        </li>
      </ul>
    </li>
  </ul>

  <br />

  <!-- Kafelki części -->
  <div class="row g-4">
    <ng-container *ngFor="let part of filteredParts">
      <div>
        <div class="part-card">
          <p>
            <strong>{{ part.partName }}</strong><br />
            Cena: {{ part.unitPrice }} – {{ part.quantityPerUnit }}<br />
            Pozostało: {{ part.leftOnStock }}<br />
            {{ part.partDescription }}
          </p>
          <button class="btn btn-sm btn-danger" (click)="deletePart(part.partId)">
            Usuń
          </button>
        </div>
      </div>
    </ng-container>

    <!-- Jeżeli po filtrze nic nie ma -->
    <div *ngIf="!loading && filteredParts.length === 0" class="text-center">
      <p>Brak części do wyświetlenia.</p>
    </div>
  </div>
</div>
