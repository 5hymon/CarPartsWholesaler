<!-- src/app/users/users.component.html -->
<div class="container">
  <h1 class="mb-4 text-center">Zarządzanie klientami</h1>

  <!-- Formularz dodawania nowego klienta -->
  <div class="form-container mb-5">
    <h2 class="mb-3">Dodaj nowego klienta</h2>
    <form (ngSubmit)="addUser()" #userForm="ngForm">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="firstName" class="form-label">Imię:</label>
          <input id="firstName" name="firstName" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.firstName"
                 required />
        </div>

        <div class="col-md-6">
          <label for="lastName" class="form-label">Nazwisko:</label>
          <input id="lastName" name="lastName" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.lastName"
                 required />
        </div>

        <div class="col-md-6">
          <label for="emailAddress" class="form-label">Email:</label>
          <input id="emailAddress" name="emailAddress" type="email"
                 class="form-control"
                 [(ngModel)]="newUser.emailAddress"
                 required />
        </div>

        <div class="col-md-6">
          <label for="phoneNumber" class="form-label">Telefon:</label>
          <input id="phoneNumber" name="phoneNumber" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.phoneNumber"
                 required />
        </div>

        <div class="col-12">
          <label for="address" class="form-label">Adres:</label>
          <input id="address" name="address" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.address"
                 required />
        </div>

        <div class="col-md-4">
          <label for="city" class="form-label">Miasto:</label>
          <input id="city" name="city" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.city"
                 required />
        </div>

        <div class="col-md-4">
          <label for="postalCode" class="form-label">Kod pocztowy:</label>
          <input id="postalCode" name="postalCode" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.postalCode"
                 required />
        </div>

        <div class="col-md-4">
          <label for="country" class="form-label">Kraj:</label>
          <input id="country" name="country" type="text"
                 class="form-control"
                 [(ngModel)]="newUser.country"
                 required />
        </div>
      </div>

      <button type="submit" class="btn btn-primary mt-4" [disabled]="userForm.invalid">
        Dodaj klienta
      </button>
    </form>
  </div>

  <!-- Spinner lub komunikat o błędzie -->
  <div *ngIf="loading" class="text-center mb-4">
    <p>Ładowanie danych…</p>
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger text-center mb-4">
    {{ errorMessage }}
  </div>

  <!-- Lista klientów w formie kart -->
  <div class="row g-4">
    <ng-container *ngFor="let user of filteredUsers">
      <div>
        <div class="user-card p-3">
          <p>
            <strong>{{ user.firstName }} {{ user.lastName }}</strong><br>
            <span>Email:</span> {{ user.emailAddress }}<br>
            <span>Telefon:</span> {{ user.phoneNumber }}<br>
            <span>Adres:</span> {{ user.address }}, {{ user.city }}, {{ user.postalCode }}, {{ user.country }}
          </p>
          <button class="btn btn-sm btn-danger mt-2" (click)="deleteUser(user.customerId!)">
            Usuń
          </button>
        </div>
      </div>
    </ng-container>

    <!-- Jeżeli lista jest pusta -->
    <div *ngIf="!loading && filteredUsers.length === 0" class="text-center">
      <p>Brak klientów do wyświetlenia.</p>
    </div>
  </div>
</div>
